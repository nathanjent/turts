-- title:  Turtle Burgle
-- author: Nathan Jent
-- desc:   We're here to burgle your turts!
-- script: moon

t=0
p=
 x:96
 y:24
 w:8
 h:16
 flip:0
 sprt:
  id:256
  w:1
  h:2
b=
 x:88
 y:32
 w:8
 h:8
 flip:0
 sprt:
  id:1
  w:1
  h:1

-- get flag as byte
fget8=(id)->peek(0x14404+id)

-- set flag as byte
fset8=(id,val)->poke(0x14404+id,val)

draw=(o)->
 spr o.sprt.id,o.x,o.y,0,1,o.flip,0,o.sprt.w,o.sprt.h

export TIC=->
 if btn 0
  p.y-=1
 if btn 1
  p.y+=1
 if btn 2
  p.x-=1
  p.flip=1
 if btn 3
  p.x+=1
  p.flip=0

 flag=fget8(mget((p.x+4)//8,(p.y+10)//8))
 if flag>0
  b.sprt.id=flag
 
 b.flip=p.flip
 b.y=8+p.y+math.sin t/9
 if p.flip==1
  b.x=p.x+10
 else
  b.x=p.x-10

 cls!
 map!
 draw p
 draw b

 t+=1

-- <TILES>
-- 001:023333300233333002cf3cf0023333300eddddd00ffffff00eddddd00fe00fe0
-- 002:0000000000000000000000000000006600777066077777600777776000600600
-- 003:09a009a09aaaaaab944aa44b9aaaaaab9dccccdb9dccccdb99aaaaab009aba00
-- 004:008990000899999089999999084a4a4008444443088888830888888388888883
-- 005:0233330023333330334a4a303344443003f7770000f767000f77667000200200
-- 006:8000000000008500000055000000000000500080005000800000000800000058
-- 007:0000000000000000000000000000005000005000000000000000000000000008
-- 008:0000000050000005000000000000000000000000000050000000000000000000
-- 009:0005000000000000000000000000000000000000000000000000000000000500
-- 010:0000000000005005000000000000000000050000000050000000000000000000
-- 011:0000000000000000000000000000000050000000000000000000000500005000
-- 012:0000000000000005000550000000000005000005050000000005005000000000
-- 013:0000000055000000000000000000000000000000000000000050000000000000
-- 014:0000000000500000000000000000000000000000000000000000000000000000
-- 015:0000000000050000000000000000000000000000005000050005000000000050
-- 016:0000008000000800000080000008000000080000008000000000000808000088
-- 017:0000000000000000000000000000000000000000000000008000000000880888
-- 018:0000000000000000800000000080000000000000080000000800000080000000
-- 019:0000088000000880000000000008000000800000080000000000000000000000
-- 020:8000000000000000000000000000080000000000000000800000800000000000
-- 021:0000000800005000000500500000800808000500000000800000000000000800
-- 022:8000000000000080000000000000080000000000500000000080880000800000
-- 023:0000000000000500000000000800500000000000000000008000000000008800
-- 025:0000000000000055000000000000000000000000000500000000000000000000
-- 026:0000000000000500050000000000000000000000000000000000000000000000
-- 027:0000050000000500000500000005000000500000005000000500000050000000
-- 028:0000000000050000000000000000000000005000000000000000000000000000
-- 029:0000000000000000000000000000000000050000000000000000000000000050
-- 030:0000000000000000000000000000000000000000000000055000000000000000
-- 031:0000000000000000000500005000500000000000000000000000000000500000
-- 032:0000008008000080080000800800008000800008008000800008008000000880
-- 033:0000000000008000008000000888800080000000080000800000000000000000
-- 034:8000800008800000000000000000000000000000008800000000008800000000
-- 035:0000000080000000000808000008880000888080080000008800080000000000
-- 036:0000000080000000000000000000000000000080000000500800000000080500
-- 037:0888050005800000088000000000000000000000500008000000000000000000
-- 038:0800005000000800000000000000000800000000500000000000000080000000
-- 039:0000080008000000000000000000000000000000000000000000000000000000
-- 040:0000005500000500000500000050000000000000055050000500000000500000
-- 041:0000000000000000000000000000000000000000000005000000500500050000
-- 042:0000000000000000000000500000000050000000000000000000050000000000
-- 043:0000000000000000000000005000000000000000000000000000000000500000
-- 045:0000000000000000000000000000005000000550000000000000000000500000
-- 046:0000000000000500000000000000000000000000000000000005000000000000
-- 047:0000000005000000000000000050000000000000000000000000000000000000
-- 048:0000088800000000000800000000000000000000000000800000000008000000
-- 049:0000000080000000000000000080000000008800000000080000000000000000
-- 050:0000008800008880000000000000000000000000000000000088008000000000
-- 051:0000000000080000000000000000000500080000800050088000080008080000
-- 052:8000050000000000850000000000008080000000080000000050000000000000
-- 053:8008005800000000008000000000000080005000080550500050000000000000
-- 054:0000080000000008000000000000000000000000055000000000005000000000
-- 055:0000000008000080000000008000000000800000000000000000000000000000
-- 056:5000000000000000000000050000000000000000000000500000000050000000
-- 057:0000055000000000000500000000050000000000000000000000000000000000
-- 058:0000000000000000000000000000000000000000000000050000000000000000
-- 060:0000000000000000000000000000500000000000000000050000000000000000
-- 061:0500000000000000000000000000000000000000000005050000000000000000
-- 062:0000000000050000500000000000000000000000000000000000000000000000
-- 063:5000000000000000000000000000000000500000000000005000000000000000
-- 064:0000000800000000000000000000000000000000000000000000000800000000
-- 065:0000000000000000000000000000000000000000000000000000000005500080
-- 066:0000000000000080008000000000008000000000000008000000000000050000
-- 067:0500000000000000000000508000080000000000000005000000000080000000
-- 068:0000000000000080000000000000000000000000000800000000000000000000
-- 069:0000000000000000000080000000000000000000000000000000000000008000
-- 071:8050000000000800000050000000000000800050800000800000000000000000
-- 072:0000050000000000050000000000050005000000000000000000000000000000
-- 073:0000000005000000000000000000000000000000000000000000000000050000
-- 074:0000000500500000000000000000000000000000000000000000050000000000
-- 076:0000000000000000000005050000000000000000000000000000000000000000
-- 077:0000000000000050000000000000000000055000000550000005000000000000
-- 078:0000000000005000000000000000000000005000000000000000000000000000
-- 079:0000000000000000005000000000000000000000000000000000000050000000
-- 080:8000000500000000000000000000050000000000005000000000000005000000
-- 081:5000000000050000000000000850000000000000008000000000000050000000
-- 082:0080080000000000000000008008000000000000000000050080000000800000
-- 083:0000000000000000000000000000000000000000000000000000008000000800
-- 084:8800000080000000000000000000000000000000000000000000000000000000
-- 085:0000000000000000000080000000000000000000008000000000000000000000
-- 086:0000000000000000000000080000000000000000000000000000000000500000
-- 087:0050000000000000008000000000000000000000000008000800000000000000
-- 088:0000050000000000000000000000500000000000000000050000000000000000
-- 089:0000050000000000000000050000500000000000000000000050000000000000
-- 090:0000000000000005055550000005000000000000000000000000000000000000
-- 091:0000000000000000000000000000000500000000000000000000000000000050
-- 092:0000000000000000000000000000000000000050000000000000000000000000
-- 093:0000000000000000000000000000000000000000000000000000000500000000
-- 094:0000000000500000000000000000000000000000000000000000000000000000
-- 095:0000000005000000050000000000000000000005000000000000000005000000
-- 096:8000000000080000000000000000005000800000000005800000000050000000
-- 097:0005008000000000000000080500000000000000000000800000008000000085
-- 098:0000008000000000008000008000800005000000000500000050000050000000
-- 099:0000080000000000000008008000080000008000000008000000080000000880
-- 100:0000000000000000000000000800805000000000000000000000000005000000
-- 101:0800000000050050000005000000000000000000000000000000000000000000
-- 102:0000000000000000000000580000000000000000000000000000000000000800
-- 103:0000800000000000000000000005000008000000000000500008000000000000
-- 104:0000000005500000000500000000000000000000000000500000000050000000
-- 105:0000000000000005500000000050000000000000000000000000005000000005
-- 106:0005000000000000000000000000000000000000000000000000000000000000
-- 107:0000000000000000000000000000000000000000000000000000005000505000
-- 108:0000000000000000000000000000005000000000000000000000000000000000
-- 109:5000500000050000000000000055000005000000000000000000000000500000
-- 110:0000000000000000500050000005500050000000000000000000000000000050
-- 111:0500000000000000050000000500005500000000050050500500000000005000
-- 112:0055005000005050000000800005000000000000000000000000000000000000
-- 113:0000000055005050000000000000000000000000008000000000800000500000
-- 114:0000000000800000000000000000080000000000000000000000000000000000
-- 115:0000008000000000000000000000000500000050000000000800000000000000
-- 116:0000000000000050080000000000000050000000000000000000000000000000
-- 117:0000000000000000000000000000000000000000000000000800080800000008
-- 118:0000000500008000000000080050008008000000000800000800080000000000
-- 119:0000000000000005000000000080000008000005000000000000000500000000
-- 120:5005000000000005005000000500000050000000000000000500000000000000
-- 122:0000500000000000000000000000000000000000000000000000000000000000
-- 123:0000000000000000000000000000000000500000000000000000000000000000
-- 124:0000050000000000000000000500000000000000000005000000000000000000
-- 125:0000000000500000000000000000000000000000050000000000050000005000
-- 126:0000500000000000500000000000000000000500000000500000000000000000
-- 127:0000000000500000000050000000000500000000000000000000500000000505
-- 128:0000200000002200000002000000000000002020000000000000200000002002
-- 129:0000000000000000020000000002020000020000000000020000020000000000
-- 130:0000202000020000020200000000000002000000000000000200000000000000
-- 131:0020000020000020000000000000000000002000000000000000000000002000
-- 133:0000000000000000000000000000000000000000000000202000020000000000
-- 134:0000000000000000000000000000000000000000000000020000002200000000
-- 135:0000000000000000000000000000000000000022000000200202000000000000
-- 136:0007000000000000000000000700707000777770000070000000000000077007
-- 137:0707070700000700007000007000000070000000000077000000007700000007
-- 138:0000000000000000000000770007000707000000000000000000000000000000
-- 139:0000000007000000000000000000000000007000070000000000000000000000
-- 140:0000000000000007000000000070000000000000000000000000000000000000
-- 141:0000000700000000700000000070707770000000000000000000000007007007
-- 142:0000000000000000000000770777000000000007000000000000000000000000
-- 143:0700070077000000000000000000000000000000070000000000000000000700
-- 144:0000000000000000000000020020000200222000000000000022000000000020
-- 145:2000000000200200000000002000000200000000000000000020000000000000
-- 146:0000000000000000000002000000000000000000000000220002200000000000
-- 147:0000000020000000000000000000000000000000000000000000000000000000
-- 148:0000000000000000000020000000200200002000020000000000000000000000
-- 149:0200000000000000000000002000000200000002000000002000000000000000
-- 151:0000000000000000000000000000200000000002000000000000000000000000
-- 152:0770000000070000007000000700007700700000000070000000000000000000
-- 153:0000700070077000000000000007000000700000000000000000000000000000
-- 154:0000070000000007700007000000000000000000700000007000000700000007
-- 155:0000000007000000000070007000000000000000000000000000000000000000
-- 156:0000000000000000000000000007070000000000000000000000000000000000
-- 157:0700000000000000000000000070000000700000000000000000000700007700
-- 158:0000000000000000000000000000000000000700000000000000000000000000
-- 159:0000000000000070000000000000000000000000007000700000000000000700
-- 160:0000000000000020002000000002000000000200022000000220000002000000
-- 161:2000000000000000000000000000000000200000000000000000000002000000
-- 162:2000200000000000000000000000000000000000002000000000022000000000
-- 163:0000000200000200002000000000000000000000000000000000000000000000
-- 164:0000000000000000020000020000000000000000000000000000000000000000
-- 165:0000002002000000000000000000000000000000000000000000000000000002
-- 166:0000002000000000000000000000000000020000000000200000000000000000
-- 167:0000000000020000020000020000002000000000000020000020000000000000
-- 168:0700000070000000000000000007000000000000000000000000000000000000
-- 169:0000000000070007770000000000000000000000000000000700000000000707
-- 170:0007000700000000000000007000000070000000700700000000000000700000
-- 171:0000000070000000000000000070000000070000000000000000700000000000
-- 172:0000000000000000000000000000000000000000000000000000000007000000
-- 173:0007070000000000007000007000000000000000770000000007000007000000
-- 174:0000000000007007000000000000000000000070000000000000000000070000
-- 175:0000000000070000000000000700700000007070000000700000000070000000
-- 176:2000000002000000200000002000000000000002000000000000000000000000
-- 177:0000000000000000000000000000000020000000000002000000000000020000
-- 178:0200000000000020000000002200000000000020000000000000200000000220
-- 180:0000000000000000000000000000000000000000000000000000000000020000
-- 181:0000000000000200000000000002000000000000000000000000000000002000
-- 182:0000000000000000000000020000000000000000000000000000000000000000
-- 183:0000000000000000000000000000200000000002000000000000000000000000
-- 184:7000000070007000000707700007000700000070000000700000000000000000
-- 185:7000000700000000000700707000070077700000000000000000000000000000
-- 187:0000000000000000000000000000000000000000000000000000070000000000
-- 188:0707070000700000000000000000000000000000000000000700000000000000
-- 189:7000000000000000000000070000700000070000000000070000000770000000
-- 190:0000000700000000000000000000000000000700000000000000000000007000
-- 191:0000007000700000070000700070000700000000000000000000000000000000
-- 192:0020000000002000000000200200000000000000000000000000000000000020
-- 193:0000000002000020200000002000000000000000000002000000000000000000
-- 194:0000000000000000000000000000000000002000000000000000000000000000
-- 195:0020020000000000000002000000000000000000000000000000000002000000
-- 196:0000000000020000000020000000000000200200000200002000000200002000
-- 197:0000000000020002000200000000000000000000000000200000000002000000
-- 198:0000000000000000000000000000000000000000000002000000000000002000
-- 199:0000002000000000000000000002000000000000000000000000000000000002
-- 200:0000000000000000000000700000000000000000000000000007000000000000
-- 201:7007000000000007000700007000000070000070700000000770007070000000
-- 202:0000000000700007000000070700700000000700000700000000000000000700
-- 203:0000000007770000070707000000000700000070700000000000000007000000
-- 204:0000000700000000000000000000700700000000000070000000000000000000
-- 205:0000000000700700000000070777770070007700000000000000000000700700
-- 206:0000000000700000000700000000000000000000000000000000000000000000
-- 207:0000000700000007000000700000707000000000000700007000700000070070
-- 208:0000000020000000000000020020000000000000000000000000000000000000
-- 209:2000000000000000002000000002000020000000000000000000000022000000
-- 210:0000000000000000000000002000000020000000000000000000000000200000
-- 211:0020000000000000000000000000000000000000000000020000000000000000
-- 212:0000000000000000000000000000000000000000000000000200000002000000
-- 213:0200000000000000000000000000000002000000000000200000000000000000
-- 214:0000200000000000000000000000000020000000000000000000000000000000
-- 215:2000000000000200000000220000020000000020002000000002000020200000
-- 216:0000707000070000007000007007000070000000000000000000000000000000
-- 217:0700000000000000070000000070070000000007000000000000000000000000
-- 218:0000000000000700000000000000000000000000000000000000000700000000
-- 220:0000000000070000000000000000000000000000000000000000000707000000
-- 221:0000070000000070000000070000000000000000000000000000007000000000
-- 222:0000007000000000000000770000000000000000000000070000000000000000
-- 223:0007000000000000000000000000700000700000000000000000000070000000
-- 224:0200200020200000000000000000002000000000220000000000000000000000
-- 225:2000000020000000000202000000000000000000000020002002000002000000
-- 226:0000000000020000000002000000000000000000000000000200200220000000
-- 227:0000000000000000000000002000000000020000000000200000000000000200
-- 228:0000000002000000000000000000000000000000000000002000000000002000
-- 229:0000000000200000000000000000000000020200000000000000000000000000
-- 230:0000000000000000000000200002000000000002000220200000000022000000
-- 231:0000000002000000220000000000000000000000000000000000000000000020
-- 232:0000000000000000000000000000000000000007000000700000770000007700
-- 233:0000000000070000070007000700000000000000000000000000000000700070
-- 234:0000000000000007000000000000000000000000707000000000007000000700
-- 235:0000000000000000000000700000000000070700000000000000000000000000
-- 236:0000000000000000000000700000000000000000000000000070000000000770
-- 237:0000000000000000000000000000000000000000000000070000000000000000
-- 238:0000000000000077007000000000000700000070000000000000007007000070
-- 239:7000000000000000707000000770700070070000707000000007000000000000
-- 240:0000000000000000020000000200000200000000000000000000000020200000
-- 241:0000020000000002000020000000000000000000000000000000000020000020
-- 242:0002000000000000002000000020022020000000000000000000000000000000
-- 243:0000000000000000020000000000000000000000000000000200220000200000
-- 244:0020000000000000200000000020000000000000000000000000000000000000
-- 245:0000000000000000000000200000200000002000002002000000200000020000
-- 246:0000000000002000200000002000000000000000000000000000000000000000
-- 247:0000000000000000000000000000002020000220000000002000000000000000
-- 248:0000077000000070070000000000007000000000000700000000007000000007
-- 249:0000000000000000070000000000000000000000700000000000000000000000
-- 250:0000000000000000000000000700000000000070000000000000000000000000
-- 251:0000000000000000000007000000000000000000000070000000000000000000
-- 252:0000000000000000070000000000000000000000000000000000000000000000
-- 253:0000000000007000000000070000000000000000007000070077000700700000
-- 254:0700707000070070000000007700000070000000000000000000000000000000
-- 255:0ddcccc00dccccc00dffcff00dccfcc00edcccd00ffffff00eddddd00fe00fe0
-- </TILES>

-- <SPRITES>
-- 000:02000000022200002222220022111110214444401444444034cf4cf034444340
-- 016:03444400088999000899d900089999000899d900089989000898f900898ff890
-- </SPRITES>

-- <MAP>
-- 002:000000101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:000010100010000000000000003000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:000000000010100010100000000000200000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:000000000000101000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:000000000000000000000000300000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:000000005000505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:000000005050000050000000000040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:000000000050005050000040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:000000000050505050000040404040400040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:000000000050500000000000404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <FLAGS>
-- 000:00ff4010415082c15b94000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </FLAGS>

-- <PALETTE>
-- 000:1a1c2c5d275db13e53ef7d57ffcd75a7f07038b76425717929366f3b5dc941a6f673eff7f4f4f494b0c2566c86333c57
-- </PALETTE>

